# Application Configuration
spring.application.name=ecm-identity-service
server.port=8080
server.error.include-message=on_param
server.error.include-binding-errors=on_param

# Database Configuration
spring.datasource.url=jdbc:postgresql://localhost:5432/ecm_identity
spring.datasource.username=ecm_user
spring.datasource.password=ecm_password
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# Flyway Migration
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# Redis Configuration
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

# Security Configuration
ecm.security.jwt.secret=${JWT_SECRET:your-256-bit-secret-key-here-change-in-production}
ecm.security.jwt.access-token-expiration=900000
ecm.security.jwt.refresh-token-expiration=604800000
ecm.security.argon2.memory=65536
ecm.security.argon2.iterations=3
ecm.security.argon2.parallelism=4
ecm.security.rate-limiting.enabled=true

# OAuth2 Authorization Server
spring.security.oauth2.authorizationserver.issuer=http://localhost:8080
spring.security.oauth2.authorizationserver.client.ecm-client.registration.client-id=ecm-client
spring.security.oauth2.authorizationserver.client.ecm-client.registration.client-secret={noop}secret
spring.security.oauth2.authorizationserver.client.ecm-client.registration.client-authentication-methods=client_secret_basic,client_secret_post
spring.security.oauth2.authorizationserver.client.ecm-client.registration.authorization-grant-types=authorization_code,refresh_token,client_credentials
spring.security.oauth2.authorizationserver.client.ecm-client.registration.redirect-uris=http://localhost:8080/login/oauth2/code/ecm-client
spring.security.oauth2.authorizationserver.client.ecm-client.registration.scopes=openid,profile,email,read,write

# Multi-tenancy
ecm.multitenancy.enabled=true
ecm.multitenancy.default-tenant=default
ecm.multitenancy.header-name=X-Tenant-ID

# Audit Logging
ecm.audit.enabled=true
ecm.audit.crypto-chain.enabled=true
ecm.audit.retention-days=2555

# WebAuthn Configuration
ecm.webauthn.rp-id=localhost
ecm.webauthn.rp-name=ECM Identity Service
ecm.webauthn.rp-origin=http://localhost:8080

# Mail Configuration
spring.mail.host=localhost
spring.mail.port=587
spring.mail.username=
spring.mail.password=
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when_authorized
management.metrics.export.prometheus.enabled=true

# Logging Configuration
logging.level.com.ecm.security.identity=DEBUG
logging.level.org.springframework.security=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
