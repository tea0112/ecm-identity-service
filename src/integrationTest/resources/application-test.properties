# Minimal integration test configuration
spring.application.name=ecm-identity-service-integration-test
spring.profiles.active=integration-test

# Database Configuration - will be overridden by Testcontainers
spring.datasource.url=jdbc:postgresql://localhost:5432/ecm_identity_test
spring.datasource.username=test
spring.datasource.password=test
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA configuration for integration tests
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# Disable Flyway for integration tests
spring.flyway.enabled=false

# Disable problematic services for now
ecm.audit.enabled=false
ecm.multitenancy.enabled=false

# Security Configuration for integration tests
ecm.security.jwt.secret=integration-test-secret-key-for-testing-purposes-only
ecm.security.jwt.access-token-expiration=900000
ecm.security.jwt.refresh-token-expiration=604800000

# Disable OAuth2 Authorization Server for now
spring.security.oauth2.authorizationserver.client.ecm-client.registration.client-id=test-client
spring.security.oauth2.authorizationserver.client.ecm-client.registration.client-secret={noop}test-secret

# Disable mail for integration tests
spring.mail.host=localhost
spring.mail.port=25
spring.mail.username=test
spring.mail.password=test

# Logging Configuration for integration tests
logging.level.com.ecm.security.identity=DEBUG
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.testcontainers=INFO
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
