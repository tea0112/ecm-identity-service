# ============================================================
# ECM Identity Service - Main Configuration
# ============================================================
# All values externalized via environment variables.
# Defaults are safe for CI/CD (no secrets, production-safe).
# ============================================================

spring.application.name=ecm-identity-service

# ------------------------------------------------------------
# DATABASE
# ------------------------------------------------------------
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# ------------------------------------------------------------
# SCHEMA
# ------------------------------------------------------------
spring.liquibase.default-schema=${DB_SCHEMA:public}
spring.jpa.properties.hibernate.default_schema=${DB_SCHEMA:public}

# ------------------------------------------------------------
# LIQUIBASE
# ------------------------------------------------------------
spring.liquibase.enabled=true
spring.liquibase.change-log=classpath:db/changelog/db.changelog-master.xml
spring.liquibase.contexts=${LIQUIBASE_CONTEXTS:prod}

# ------------------------------------------------------------
# JPA / HIBERNATE
# ------------------------------------------------------------
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=${JPA_FORMAT_SQL:false}

# ------------------------------------------------------------
# LOGGING
# ------------------------------------------------------------
logging.level.root=${LOG_LEVEL_ROOT:INFO}
logging.level.liquibase=${LOG_LEVEL_LIQUIBASE:WARN}
logging.level.com.ecm.security=${LOG_LEVEL_APP:INFO}

# ------------------------------------------------------------
# SECURITY BOOTSTRAP
# ------------------------------------------------------------
app.security.admin.initial-password=${ADMIN_INITIAL_PASSWORD:}
app.security.admin.email=${ADMIN_EMAIL:admin@company.com}

# ------------------------------------------------------------
# SERVER
# ------------------------------------------------------------
server.port=${SERVER_PORT:8080}
server.error.include-message=${ERROR_INCLUDE_MESSAGE:never}
server.error.include-stacktrace=${ERROR_INCLUDE_STACKTRACE:never}